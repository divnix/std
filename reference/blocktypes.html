<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Builtin Block Types - The Standard Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/pagetoc.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../ARCHITECTURE.html">Design & Architecture</a></li><li class="chapter-item expanded affix "><a href="../PITCH.html">Sales Pitch</a></li><li class="chapter-item expanded affix "><a href="../COMPARE.html">Comparisions</a></li><li class="chapter-item expanded affix "><a href="../ROADMAP.html">Roadmap</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="../tutorials/walk-in-the-park.html"><strong aria-hidden="true">1.</strong> A walk in the park</a></li><li class="chapter-item expanded "><a href="../tutorials/hello-world/index.html"><strong aria-hidden="true">2.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../tutorials/hello-moon/index.html"><strong aria-hidden="true">3.</strong> Hello Moon</a></li><li class="chapter-item expanded affix "><li class="part-title">How-To Guides</li><li class="chapter-item expanded "><a href="../guides/growing-cells.html"><strong aria-hidden="true">4.</strong> Growing Cells</a></li><li class="chapter-item expanded "><a href="../guides/incl.html"><strong aria-hidden="true">5.</strong> Include Filter</a></li><li class="chapter-item expanded "><a href="../guides/envrc.html"><strong aria-hidden="true">6.</strong> Setup .envrc</a></li><li class="chapter-item expanded affix "><li class="part-title">Explanation</li><li class="chapter-item expanded "><a href="../explain/why-nix.html"><strong aria-hidden="true">7.</strong> Why nix?</a></li><li class="chapter-item expanded "><a href="../explain/why-std.html"><strong aria-hidden="true">8.</strong> Why std?</a></li><li class="chapter-item expanded "><a href="../explain/architecture-decision-records/index.html"><strong aria-hidden="true">9.</strong> Architecture Decisions</a></li><li class="chapter-item expanded affix "><li class="part-title">Patterns</li><li class="chapter-item expanded "><a href="../patterns/four-packaging-layers.html"><strong aria-hidden="true">10.</strong> The 4 Packaging Layers</a></li><li class="chapter-item expanded affix "><li class="part-title">Templates</li><li class="chapter-item expanded "><a href="../templates/minimal.html"><strong aria-hidden="true">11.</strong> Minimal</a></li><li class="chapter-item expanded "><a href="../templates/rust.html"><strong aria-hidden="true">12.</strong> Rust</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="../reference/cli.html"><strong aria-hidden="true">13.</strong> TUI/CLI</a></li><li class="chapter-item expanded "><a href="../reference/conventions.html"><strong aria-hidden="true">14.</strong> Conventions</a></li><li class="chapter-item expanded "><a href="../reference/deprecations.html"><strong aria-hidden="true">15.</strong> Deprecations</a></li><li class="chapter-item expanded "><a href="../reference/blocktypes.html" class="active"><strong aria-hidden="true">16.</strong> Builtin Block Types</a></li><li class="chapter-item expanded "><a href="../reference/lib.html"><strong aria-hidden="true">17.</strong> Cell: lib</a></li><li class="chapter-item expanded "><a href="../reference/std.html"><strong aria-hidden="true">18.</strong> Cell: std</a></li><li class="chapter-item expanded "><a href="../glossary.html"><strong aria-hidden="true">19.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Standard Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>
<h1 id="builtin-block-types"><a class="header" href="#builtin-block-types">Builtin Block Types</a></h1>
<p>A few Block Types are packaged with <code>std</code>.</p>
<p>In practical terms, Block Types distinguish themselves through the
actions they provide to a particular Cell Block.</p>
<p>It is entirely possible to define custom Block Types with custom
Actions according to the needs of your project.</p>
<h2 id="arion"><a class="header" href="#arion">Arion</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
}: let
  l = nixpkgs.lib // builtins;
  /*
  Use the arion for arionCompose Jobs - https://docs.hercules-ci.com/arion/

  Available actions:
    - up
    - ps
    - stop
    - rm
    - config
    - arion
  */
  arion = name: {
    inherit name;
    type = &quot;arion&quot;;
    actions = {
      system,
      fragment,
      fragmentRelPath,
      target,
    }: let
      cmd = &quot;arion --prebuilt-file ${target.config.out.dockerComposeYaml}&quot;;
    in [
      (mkCommand system {
        name = &quot;up&quot;;
        description = &quot;arion up&quot;;
        command = ''
          ${cmd} up &quot;$@&quot;
        '';
      })
      (mkCommand system {
        name = &quot;ps&quot;;
        description = &quot;exec this arion task to ps&quot;;
        command = ''
          ${cmd} ps &quot;$@&quot;
        '';
      })
      (mkCommand system {
        name = &quot;stop&quot;;
        description = &quot;arion stop&quot;;
        command = ''
          ${cmd} stop &quot;$@&quot;
        '';
      })
      (mkCommand system {
        name = &quot;rm&quot;;
        description = &quot;arion rm&quot;;
        command = ''
          ${cmd} rm &quot;$@&quot;
        '';
      })
      (mkCommand system {
        name = &quot;config&quot;;
        description = &quot;check the docker-compose yaml file&quot;;
        command = ''
          ${cmd} config &quot;$@&quot;
        '';
      })
      (mkCommand system {
        name = &quot;arion&quot;;
        description = &quot;pass any command to arion&quot;;
        command = ''
          ${cmd} &quot;$@&quot;
        '';
      })
    ];
  };
in
  arion
</code></pre>
<h2 id="runnables-todo-vs-installables"><a class="header" href="#runnables-todo-vs-installables">Runnables (todo: vs installables)</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
  sharedActions,
}: let
  lib = nixpkgs.lib // builtins;
  /*
  Use the Runnables Blocktype for targets that you want to
  make accessible with a 'run' action on the TUI.
  */
  runnables = name: {
    __functor = import ./__functor.nix;
    inherit name;
    type = &quot;runnables&quot;;
    actions = {
      system,
      fragment,
      fragmentRelPath,
      target,
    }: [
      (sharedActions.build system target)
      (sharedActions.run system target)
    ];
  };
in
  runnables
</code></pre>
<h2 id="installables-todo-vs-runnables"><a class="header" href="#installables-todo-vs-runnables">Installables (todo: vs runnables)</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
  sharedActions,
}: let
  l = nixpkgs.lib // builtins;
  /*
  Use the Installables Blocktype for targets that you want to
  make availabe for installation into the user's nix profile.

  Available actions:
    - install
    - upgrade
    - remove
    - build
    - bundle
    - bundleImage
    - bundleAppImage
  */
  installables = name: {
    __functor = import ./__functor.nix;
    inherit name;
    type = &quot;installables&quot;;
    actions = {
      system,
      fragment,
      fragmentRelPath,
      target,
    }: [
      (sharedActions.build system target)
      # profile commands require a flake ref
      (mkCommand system {
        name = &quot;install&quot;;
        description = &quot;install this target&quot;;
        command = ''
          # ${target}
          if test -z &quot;$PRJ_ROOT&quot;; then
            echo &quot;PRJ_ROOT is not set. Action aborting.&quot;
            exit 1
          fi
          nix profile install $PRJ_ROOT#${fragment}
        '';
      })
      (mkCommand system {
        name = &quot;upgrade&quot;;
        description = &quot;upgrade this target&quot;;
        command = ''
          # ${target}
          if test -z &quot;$PRJ_ROOT&quot;; then
            echo &quot;PRJ_ROOT is not set. Action aborting.&quot;
            exit 1
          fi
          nix profile upgrade $PRJ_ROOT#${fragment}
        '';
      })
      (mkCommand system {
        name = &quot;remove&quot;;
        description = &quot;remove this target&quot;;
        command = ''
          # ${target}
          if test -z &quot;$PRJ_ROOT&quot;; then
            echo &quot;PRJ_ROOT is not set. Action aborting.&quot;
            exit 1
          fi
          nix profile remove $PRJ_ROOT#${fragment}
        '';
      })
      # TODO: use target. `nix bundle` requires a flake ref, but we may be able to use nix-bundle instead as a workaround
      (mkCommand system {
        name = &quot;bundle&quot;;
        description = &quot;bundle this target&quot;;
        command = ''
          # ${target}
          if test -z &quot;$PRJ_ROOT&quot;; then
            echo &quot;PRJ_ROOT is not set. Action aborting.&quot;
            exit 1
          fi
          nix bundle --bundler github:Ninlives/relocatable.nix --refresh $PRJ_ROOT#${fragment}
        '';
      })
      (mkCommand system {
        name = &quot;bundleImage&quot;;
        description = &quot;bundle this target to image&quot;;
        command = ''
          # ${target}
          if test -z &quot;$PRJ_ROOT&quot;; then
            echo &quot;PRJ_ROOT is not set. Action aborting.&quot;
            exit 1
          fi
          nix bundle --bundler github:NixOS/bundlers#toDockerImage --refresh $PRJ_ROOT#${fragment}
        '';
      })
      (mkCommand system {
        name = &quot;bundleAppImage&quot;;
        description = &quot;bundle this target to AppImage&quot;;
        command = ''
          # ${target}
          if test -z &quot;$PRJ_ROOT&quot;; then
            echo &quot;PRJ_ROOT is not set. Action aborting.&quot;
            exit 1
          fi
          nix bundle --bundler github:ralismark/nix-appimage --refresh $PRJ_ROOT#${fragment}
        '';
      })
    ];
  };
in
  installables
</code></pre>
<h2 id="pkgs"><a class="header" href="#pkgs">Pkgs</a></h2>
<pre><code class="language-nix">{...}: let
  /*
  Use the Pkgs Blocktype if you need to construct your custom
  variant of nixpkgs with overlays.

  Targets will be excluded from the CLI / TUI  and thus not
  slow them down.
  */
  pkgs = name: {
    inherit name;
    type = &quot;pkgs&quot;;
    cli = false; # its special power
  };
in
  pkgs
</code></pre>
<h2 id="devshells"><a class="header" href="#devshells">Devshells</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
  sharedActions,
}: let
  l = nixpkgs.lib // builtins;
  mkDevelopDrv = import ../devshell-drv.nix;
  /*
  Use the Devshells Blocktype for devShells.

  Available actions:
    - build
    - enter
  */
  devshells = name: {
    __functor = import ./__functor.nix;
    inherit name;
    type = &quot;devshells&quot;;
    actions = {
      system,
      fragment,
      fragmentRelPath,
      target,
    }: let
      developDrv = mkDevelopDrv target;
    in [
      (sharedActions.build system target)
      (mkCommand system {
        name = &quot;enter&quot;;
        description = &quot;enter this devshell&quot;;
        command = ''
          if test -z &quot;$PRJ_ROOT&quot;; then
            echo &quot;PRJ_ROOT is not set. Action aborting.&quot;
            exit 1
          fi
          if test -z &quot;$PRJ_DATA_DIR&quot;; then
            echo &quot;PRJ_DATA_DIR is not set. Action aborting.&quot;
            exit 1
          fi
          profile_path=&quot;$PRJ_DATA_DIR/${fragmentRelPath}&quot;
          mkdir -p &quot;$profile_path&quot;
          # ${developDrv}
          nix_args=(
            &quot;${builtins.unsafeDiscardStringContext developDrv.drvPath}&quot;
            &quot;--no-update-lock-file&quot;
            &quot;--no-write-lock-file&quot;
            &quot;--no-warn-dirty&quot;
            &quot;--accept-flake-config&quot;
            &quot;--no-link&quot;
            &quot;--build-poll-interval&quot; &quot;0&quot;
            &quot;--builders-use-substitutes&quot;
          )
          nix build &quot;''${nix_args[@]}&quot; --profile &quot;$profile_path/shell-profile&quot;
          _SHELL=&quot;$SHELL&quot;
          eval &quot;$(nix print-dev-env ${developDrv})&quot;
          SHELL=&quot;$_SHELL&quot;
          if ! [[ -v STD_DIRENV ]]; then
            if declare -F __devshell-motd &amp;&gt;/dev/null; then
              __devshell-motd
            fi
            exec $SHELL -i
          fi
        '';
      })
    ];
  };
in
  devshells
</code></pre>
<h2 id="nixago"><a class="header" href="#nixago">Nixago</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
}: let
  l = nixpkgs.lib // builtins;
  /*
  Use the Nixago Blocktype for nixago pebbles.

  Use Nixago pebbles to ensure files are present
  or symlinked into your repository. You may typically
  use this for repo dotfiles.

  For more information, see: https://github.com/nix-community/nixago.

  Available actions:
    - ensure
    - explore

  */
  nixago = name: {
    inherit name;
    type = &quot;nixago&quot;;
    actions = {
      system,
      fragment,
      fragmentRelPath,
      target,
    }: [
      (mkCommand system {
        name = &quot;populate&quot;;
        description = &quot;populate this nixago file into the repo&quot;;
        command = ''
          ${target.install}/bin/nixago_shell_hook
        '';
      })
      (mkCommand system {
        name = &quot;explore&quot;;
        description = &quot;interactively explore the nixago file&quot;;
        command = ''
          ${nixpkgs.legacyPackages.${system}.bat}/bin/bat &quot;${target.configFile}&quot;
        '';
      })
    ];
  };
in
  nixago
</code></pre>
<h2 id="containers"><a class="header" href="#containers">Containers</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
  sharedActions,
}: let
  l = nixpkgs.lib // builtins;
  /*
  Use the Containers Blocktype for OCI-images built with nix2container.

  Available actions:
    - print-image
    - copy-to-registry
    - copy-to-podman
    - copy-to-docker
  */
  containers = name: {
    __functor = import ./__functor.nix;
    inherit name;
    type = &quot;containers&quot;;
    actions = {
      system,
      fragment,
      fragmentRelPath,
      target,
    }: [
      (sharedActions.build system target)
      (mkCommand system {
        name = &quot;print-image&quot;;
        description = &quot;print out the image name &amp; tag&quot;;
        command = ''
          echo
          echo &quot;${target.imageName}:${target.imageTag}&quot;
        '';
      })
      (mkCommand system {
        name = &quot;publish&quot;;
        description = &quot;copy the image to its remote registry&quot;;
        command = let
          image = target.imageRefUnsafe or &quot;${target.imageName}:${target.imageTag}&quot;;
        in ''
          # docker://${builtins.unsafeDiscardStringContext image}
          ${target.copyToRegistry}/bin/copy-to-registry
        '';
        proviso =
          l.toFile &quot;container-proviso&quot;
          # bash
          ''
            function proviso() {
            local -n input=$1
            local -n output=$2

            local -a images
            local delim=&quot;$RANDOM&quot;

            function get_images () {
              command nix show-derivation $@ \
              | command jq -r '.[].env.text' \
              | command grep -o 'docker://\S*'
            }

            drvs=&quot;$(command jq -r '.actionDrv | select(. != &quot;null&quot;)' &lt;&lt;&lt; &quot;''${input[@]}&quot;)&quot;

            mapfile -t images &lt; &lt;(get_images $drvs)

            command cat &lt;&lt; &quot;$delim&quot; &gt; /tmp/check.sh
            #!/usr/bin/env bash
            if ! command skopeo inspect --insecure-policy &quot;$1&quot; &amp;&gt;/dev/null; then
            echo &quot;$1&quot; &gt;&gt; /tmp/no_exist
            fi
            $delim

            chmod +x /tmp/check.sh

            rm -f /tmp/no_exist

            echo &quot;''${images[@]}&quot; \
            | command xargs -n 1 -P 0 /tmp/check.sh

            declare -a filtered

            for i in &quot;''${!images[@]}&quot;; do
              if command grep &quot;''${images[$i]}&quot; /tmp/no_exist &amp;&gt;/dev/null; then
                filtered+=(&quot;''${input[$i]}&quot;)
              fi
            done

            output=$(command jq -cs '. += $p' --argjson p &quot;$output&quot; &lt;&lt;&lt; &quot;''${filtered[@]}&quot;)
            }
          '';
      })
      (mkCommand system {
        name = &quot;copy-to-registry&quot;;
        description = &quot;copy the image to its remote registry&quot;;
        command = ''
          ${target.copyToRegistry}/bin/copy-to-registry
        '';
      })
      (mkCommand system {
        name = &quot;copy-to-docker&quot;;
        description = &quot;copy the image to the local docker registry&quot;;
        command = ''
          ${target.copyToDockerDaemon}/bin/copy-to-docker-daemon
        '';
      })
      (mkCommand system {
        name = &quot;copy-to-podman&quot;;
        description = &quot;copy the image to the local podman registry&quot;;
        command = ''
          ${target.copyToPodman}/bin/copy-to-podman
        '';
      })
    ];
  };
in
  containers
</code></pre>
<h2 id="data"><a class="header" href="#data">Data</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
}: let
  l = nixpkgs.lib // builtins;
  /*
  Use the Data Blocktype for json serializable data.

  Available actions:
    - write
    - explore

  For all actions is true:
    Nix-proper 'stringContext'-carried dependency will be realized
    to the store, if present.
  */
  data = name: {
    inherit name;
    type = &quot;data&quot;;
    actions = {
      system,
      fragment,
      fragmentRelPath,
      target,
    }: let
      inherit (nixpkgs.legacyPackages.${system}) pkgs;

      # if target ? __std_data_wrapper, then we need to unpack from `.data`
      json = pkgs.writeTextFile {
        name = &quot;data.json&quot;;
        text = builtins.toJSON (
          if target ? __std_data_wrapper
          then target.data
          else target
        );
      };
      jq = [&quot;${pkgs.jq}/bin/jq&quot; &quot;-r&quot; &quot;'.'&quot; &quot;${json}&quot;];
      fx = [&quot;|&quot; &quot;${pkgs.fx}/bin/fx&quot;];
    in [
      (mkCommand system {
        name = &quot;write&quot;;
        description = &quot;write to file&quot;;
        command = &quot;echo ${json}&quot;;
      })
      (mkCommand system {
        name = &quot;explore&quot;;
        description = &quot;interactively explore&quot;;
        command = l.concatStringsSep &quot;\t&quot; (jq ++ fx);
      })
    ];
  };
in
  data
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
}: let
  l = nixpkgs.lib // builtins;
  /*
  Use the Functions Blocktype for reusable nix functions that you would
  call elswhere in the code.

  Also use this for all types of modules and profiles, since they are
  implemented as functions.

  Consequently, there are no actions available for functions.
  */
  functions = name: {
    inherit name;
    type = &quot;functions&quot;;
  };
in
  functions
</code></pre>
<h2 id="anything"><a class="header" href="#anything">Anything</a></h2>
<p><em>Note: while the implementation is the same as <code>functions</code>, the semantics are different. Implementations may diverge in the future.</em></p>
<pre><code class="language-nix">{
  nixpkgs,
  mkCommand,
}: let
  l = nixpkgs.lib // builtins;
  /*
  Use the Anything Blocktype as a fallback.

  It doesn't have actions.
  */
  anything = name: {
    inherit name;
    type = &quot;anything&quot;;
  };
in
  anything
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/deprecations.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../reference/lib.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/deprecations.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../reference/lib.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../theme/mermaid.min.js"></script>
        <script src="../theme/mermaid-init.js"></script>
        <script src="../theme/pagetoc.js"></script>


    </body>
</html>
