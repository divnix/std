<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hello Moon - The Standard Book</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">Tutorials</li><li class="chapter-item expanded "><a href="../../tutorials/hello-world/index.html"><strong aria-hidden="true">1.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../../tutorials/hello-moon/index.html" class="active"><strong aria-hidden="true">2.</strong> Hello Moon</a></li><li class="chapter-item expanded affix "><li class="part-title">How-To Guides</li><li class="chapter-item expanded "><a href="../../guides/growing-cells.html"><strong aria-hidden="true">3.</strong> Growing Cells</a></li><li class="chapter-item expanded "><a href="../../guides/incl.html"><strong aria-hidden="true">4.</strong> Include Filter</a></li><li class="chapter-item expanded "><a href="../../guides/envrc.html"><strong aria-hidden="true">5.</strong> Setup .envrc</a></li><li class="chapter-item expanded affix "><li class="part-title">Explanation</li><li class="chapter-item expanded "><a href="../../explain/why-nix.html"><strong aria-hidden="true">6.</strong> Why nix?</a></li><li class="chapter-item expanded "><a href="../../explain/why-std.html"><strong aria-hidden="true">7.</strong> Why std?</a></li><li class="chapter-item expanded "><a href="../../explain/architecture-decision-records/index.html"><strong aria-hidden="true">8.</strong> Architecture Decisions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../explain/architecture-decision-records/0003-drop-as-nix-cli-epiphyte-flag.html"><strong aria-hidden="true">8.1.</strong> 0001 Drop as-nix-cli-epiphyte flag</a></li><li class="chapter-item expanded "><a href="../../explain/architecture-decision-records/0002-wire-up-documentation-instrumentation.html"><strong aria-hidden="true">8.2.</strong> 0002 Wire Up Documentation Instrumentation</a></li><li class="chapter-item expanded "><a href="../../explain/architecture-decision-records/0001-increase-repo-discoverability-with-a-tui.html"><strong aria-hidden="true">8.3.</strong> 0003 Increase Repo Discoverability With a Tui</a></li><li class="chapter-item expanded "><a href="../../explain/architecture-decision-records/0004-add-nixago-instrumentation.html"><strong aria-hidden="true">8.4.</strong> 0004 Add Nixago Instrumentation</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Patterns</li><li class="chapter-item expanded "><a href="../../patterns/four-packaging-layers.html"><strong aria-hidden="true">9.</strong> The 4 Packaging Layers</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="../../reference/cli.html"><strong aria-hidden="true">10.</strong> TUI/CLI</a></li><li class="chapter-item expanded "><a href="../../reference/conventions.html"><strong aria-hidden="true">11.</strong> Conventions</a></li><li class="chapter-item expanded "><a href="../../reference/clades.html"><strong aria-hidden="true">12.</strong> Builtin Clades</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/clades/data-clade.html"><strong aria-hidden="true">12.1.</strong> Data</a></li><li class="chapter-item expanded "><a href="../../reference/clades/functions-clade.html"><strong aria-hidden="true">12.2.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../../reference/clades/runnables-clade.html"><strong aria-hidden="true">12.3.</strong> Runnables</a></li><li class="chapter-item expanded "><a href="../../reference/clades/installables-clade.html"><strong aria-hidden="true">12.4.</strong> Installables</a></li><li class="chapter-item expanded "><a href="../../reference/clades/microvms-clade.html"><strong aria-hidden="true">12.5.</strong> Microvms</a></li><li class="chapter-item expanded "><a href="../../reference/clades/devshells-clade.html"><strong aria-hidden="true">12.6.</strong> Devshells</a></li><li class="chapter-item expanded "><a href="../../reference/clades/containers-clade.html"><strong aria-hidden="true">12.7.</strong> Containers</a></li><li class="chapter-item expanded "><a href="../../reference/clades/nixago-clade.html"><strong aria-hidden="true">12.8.</strong> Nixago</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/std/index.html"><strong aria-hidden="true">13.</strong> //std</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/std/cli/index.html"><strong aria-hidden="true">13.1.</strong> /cli</a></li><li class="chapter-item expanded "><a href="../../reference/std/devshellProfiles/index.html"><strong aria-hidden="true">13.2.</strong> /devshellProfiles</a></li><li class="chapter-item expanded "><a href="../../reference/std/lib/index.html"><strong aria-hidden="true">13.3.</strong> /lib</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/std/lib/fromMakesWith.html"><strong aria-hidden="true">13.3.1.</strong> /fromMakesWith</a></li><li class="chapter-item expanded "><a href="../../reference/std/lib/mkShell.html"><strong aria-hidden="true">13.3.2.</strong> /mkShell</a></li><li class="chapter-item expanded "><a href="../../reference/std/lib/writeShellEntrypoint.html"><strong aria-hidden="true">13.3.3.</strong> /writeShellEntrypoint</a></li><li class="chapter-item expanded "><a href="../../reference/std/lib/mkNixago.html"><strong aria-hidden="true">13.3.4.</strong> /mkNixago</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/std/nixago/index.html"><strong aria-hidden="true">13.4.</strong> /nixago</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/std/nixago/adrgen.html"><strong aria-hidden="true">13.4.1.</strong> /adrgen</a></li><li class="chapter-item expanded "><a href="../../reference/std/nixago/conform.html"><strong aria-hidden="true">13.4.2.</strong> /conform</a></li><li class="chapter-item expanded "><a href="../../reference/std/nixago/editorconfig.html"><strong aria-hidden="true">13.4.3.</strong> /editorconfig</a></li><li class="chapter-item expanded "><a href="../../reference/std/nixago/lefthook.html"><strong aria-hidden="true">13.4.4.</strong> /lefthook</a></li><li class="chapter-item expanded "><a href="../../reference/std/nixago/mdbook.html"><strong aria-hidden="true">13.4.5.</strong> /mdbook</a></li><li class="chapter-item expanded "><a href="../../reference/std/nixago/treefmt.html"><strong aria-hidden="true">13.4.6.</strong> /treefmt</a></li></ol></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">14.</strong> //automation</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/automation/devshells/index.html"><strong aria-hidden="true">14.1.</strong> /devshells</a></li></ol></li><li class="chapter-item expanded "><a href="../../glossary.html"><strong aria-hidden="true">15.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Standard Book</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="hello-moon"><a class="header" href="#hello-moon">Hello Moon</a></h1>
<p><em>A slightly more complete <a href="../hello-world">hello world</a> tutorial.</em></p>
<p>This tutorial implements a very typical <code>automation</code> Cell and its Organelles for a somewhat bigger project.
It also makes use of more advanced functions of <code>std</code>.
Namely:</p>
<ul>
<li><code>std.growOn</code> instead of <code>std.grow</code></li>
<li><code>std.harvest</code> to provide compatibility layers of ‚Äúsoil‚Äù</li>
<li>non-default Organelle definitions</li>
<li>the input debug facility</li>
</ul>
<p>The terms <em>‚ÄúClade‚Äù</em>, <em>‚ÄúCell‚Äù</em>, <em>‚ÄúOrganelle‚Äù</em>, <em>‚ÄúTarget‚Äù</em> and <em>‚ÄúAction‚Äù</em> have special meaning within the context of <code>std</code>.
With these clear definitions, we navigate and communicate the code structure much more easily.
In order to familiarize yourself with them, please have a quick glance at the <a href="../../glossary.html">glossary</a>.</p>
<h2 id="file-layout"><a class="header" href="#file-layout">File Layout</a></h2>
<p>Let‚Äôs start again with a flake:</p>
<h4 id="flakenix"><a class="header" href="#flakenix"><code>./flake.nix</code></a></h4>
<pre><code class="language-nix">{
  inputs.std.url = &quot;github:divnix/std&quot;;
  inputs.nixpkgs.url = &quot;nixpkgs&quot;;

  outputs = {std, ...} @ inputs:
  /*
  brings std attributes into scope
  namely used here: `growOn`, `harvest` &amp; `clades`
  */
    with std;
    /*
    grows a flake &quot;from cells&quot; on &quot;soil&quot;; see below...
    */
      growOn {
        /*
        we always inherit inputs and expose a deSystemized version
        via {inputs, cell} during import of organelles.
        */
        inherit inputs;

        /*
        from where to &quot;grow&quot; cells?
        */
        cellsFrom = ./nix;

        /*
        custom organelles (i.e. &quot;typed outputs&quot;)
        */
        organelles = [
          (clades.devshells &quot;devshells&quot;)
          (clades.nixago &quot;nixago&quot;)
        ];

        /*
        This debug facility helps you to explore what attributes are available
        for a given input untill you get more familiar with `std`.
        */
        debug = [&quot;inputs&quot; &quot;std&quot;];
      }
      /*

      Soil is an idiom to refer to compatibility layers that are recursively
      merged onto the outputs of the `std.grow` function.

      */
      # Soil ...
      # 1) layer for compat with the nix CLI
      {
        devShells = harvest inputs.self [&quot;automation&quot; &quot;devshells&quot;];
      }
      # 2) there can be various layers; `growOn` is a variadic function
      {};
}
</code></pre>
<p>This time we specified <code>cellsFrom = ./nix;</code>.
This is gentle so that our colleagues know immediately which files to either look or never look at depending on where they stand.</p>
<p>We also used <code>std.growOn</code> instead of <code>std.grow</code> so that we can add compatibility layers of ‚Äúsoil‚Äù.</p>
<p>Furthermore, we only defined two Organelles: <code>nixago</code> &amp; <code>devshells</code>. More on them follows‚Ä¶</p>
<h4 id="nixautomation"><a class="header" href="#nixautomation"><code>./nix/automation/*</code></a></h4>
<p>Next, we define a <code>automation</code> cell.
Each project will have some amount of automation.
This can be repository automation, such as code generation.
Or it can be a CI/CD specification.
In here, we wire up two tools from the Nix ecosystem: <a href="https://github.com/numtide/devshell"><code>numtide/devshell</code></a> &amp; <a href="https://github.com/nix-community/nixago"><code>nix-community/nixago</code></a>.</p>
<blockquote>
<p><em>Please refer to these links to get yourself a quick overview before continuing this tutorial, in case you don‚Äôt know them, yet.</em></p>
<p>A <em>very</em> short refresher:</p>
<ul>
<li><strong>Nixago</strong>: Template &amp; render repository (dot-)files with nix. <a href="../../explain/why-nix.html">Why nix?</a></li>
<li><strong>Devshell</strong>: Friendly &amp; reproducible development shells ‚Äî the original ‚Ñ¢.</li>
</ul>
</blockquote>
<blockquote>
<p><strong>Some semantic background:</strong></p>
<p>Both, Nixago &amp; Devshell are <em>Component Tools</em>.</p>
<p><em>(Vertical) Component Tools</em> are distinct from <em>(Horizontal) Integration Tools</em> ‚Äî such as <code>std</code> ‚Äî in that they provide a specific capability in a minimal linux style: <em>‚ÄúDo one thing and do it well.‚Äù</em></p>
<p>Integration Tools however combine them into a polished user story and experience.</p>
<p>The Nix ecosystem is very rich in <em>component tools</em>, however only few <em>integration tools</em> exist at the time of writing.</p>
</blockquote>
<h4 id="nixautomationdevshellsnix"><a class="header" href="#nixautomationdevshellsnix"><code>./nix/automation/devshells.nix</code></a></h4>
<p>Let‚Äôs start with the <code>cell.devshells</code> Organelle and work our way backwards to the <code>cell.nixago</code> Organelle below.</p>
<blockquote>
<p><strong>More semantic background:</strong></p>
<p>I could also reference them as <code>inputs.cells.automation.devshells</code> &amp; <code>inputs.cells.automation.nixago</code>.</p>
<p>But, because we are sticking with the local Cell context, we don‚Äôt want to confuse the future code reader.
Instead, we gently hint at the locality by just referring them via the <code>cell</code> context.</p>
</blockquote>
<pre><code class="language-nix">{
  inputs,
  cell,
}: let
  /*
  I usually just find it very handy to alias all things library onto `l`...
  The distinction between `builtins` and `nixpkgs.lib` has little practical
  relevance, in most scenarios.
  */
  l = nixpkgs.lib // builtins;

  /*
  It is good practice to in-scope:
  - inputs by *name*
  - other Cells by their *Cell names*
  - the local Cell's Organelles by their *Organelle names*.

  However, for `std`, we make an exeption and in-scope, despite being an
  input, it's primary Cell with the same name.
  */
  inherit (inputs) nixpkgs;
  inherit (inputs.std) std;
  inherit (cell) nixago;
in
  # we use Standard's mkShell wrapper for its Nixago integration
  l.mapAttrs (_: std.lib.mkShell) {
    default = {...}: {
      name = &quot;My Devshell&quot;;
      # This `nixago` option is a courtesy of the `std` horizontal
      # integration between Devshell and Nixago
      nixago = [
        # off-the-shelve from `std`
        (std.nixago.conform {configData = {inherit (inputs) cells;};})
        std.nixago.lefthook
        std.nixago.adrgen
        # modified from the local Cell
        nixago.treefmt
        nixago.editorconfig
        nixago.mdbook
      ];
      # Devshell handily represents `commands` as part of
      # its Message Of The Day (MOTD) or the built-in `menu` command.
      commands = [
        {
          package = nixpkgs.reuse;
          category = &quot;legal&quot;;
          /*
          For display, reuse already has both a `pname` &amp; `meta.description`.
          Hence, we don't need to inline these - they are autodetected:

          name = &quot;reuse&quot;;
          description = &quot;Reuse is a tool to manage a project's LICENCES&quot;;
          */
        }
      ];
      # Always import the `std` default devshellProfile to also install
      # the `std` CLI/TUI into your Devshell.
      imports = [std.devshellProfiles.default];
    };
  }
</code></pre>
<p>The <code>nixago = [];</code> option in this definition is a special integration provided by the <a href="../../reference/std/lib/mkShell.html">Standard‚Äôs <code>devshell</code>-wrapper (<code>std.lib.mkShell</code>)</a>.</p>
<p><em>This is how <code>std</code> delivers on its promise of being a (horizontal) integration tool that wraps (vertical) component tools into a polished user story and experience.</em></p>
<p>Because we made use of <code>std.harvest</code> in the flake, you now can actually test out the devshell via the Nix CLI compat layer by just running <code>nix develop -c &quot;$SHELL&quot;</code> in the directory of the flake.
For a more elegant method of entering a development shell read on the <a href="#direnv">direnv</a> section below.</p>
<h4 id="nixautomationnixagonix"><a class="header" href="#nixautomationnixagonix"><code>./nix/automation/nixago.nix</code></a></h4>
<p>As we have seen above, the <code>nixago</code> option in the <code>cell.devshells</code> Organelle references Targets from both <code>std.nixago</code> <em>and</em> <code>cell.nixago</code>.
While you can explore <code>std.nixago</code> <a href="https://github.com/divnix/std/blob/main/cells/std/nixago.nix">here</a>, let‚Äôs now have a closer look at <code>cell.nixago</code>:</p>
<pre><code class="language-nix">{
  inputs,
  cell,
}: let
  inherit (inputs) nixpkgs;
  inherit (inputs.std) std;
  /*
  While these are strictly specializations of the available
  Nixago Pebbles at `std.nixago.*`, it would be entirely
  possible to define a completely new pebble inline
  */
in {
  /*
  treefmt: https://github.com/numtide/treefmt
  */
  treefmt = std.nixago.treefmt {
    # we use the configData attribute to modify the
    # target data structure via a simple data overlay
    # (`divnix/data-merge` / `std.dmerge`) mechanism.
    configData.formatter.go = {
      command = &quot;gofmt&quot;;
      options = [&quot;-w&quot;];
      includes = [&quot;*.go&quot;];
    };
    # for the `std.lib.mkShell` integration with nixago,
    # we also hint which packages should be made available
    # in the environment for this &quot;Nixago Pebble&quot;
    packages = [nixpkgs.go];
  };

  /*
  editorconfig: https://editorconfig.org/
  */
  editorconfig = std.nixago.editorconfig {
    configData = {
      # the actual target data structure depends on the
      # Nixago Pepple, and ultimately, on the tool to configure
      &quot;*.xcf&quot; = {
        charset = &quot;unset&quot;;
        end_of_line = &quot;unset&quot;;
        insert_final_newline = &quot;unset&quot;;
        trim_trailing_whitespace = &quot;unset&quot;;
        indent_style = &quot;unset&quot;;
        indent_size = &quot;unset&quot;;
      };
      &quot;{*.go,go.mod}&quot; = {
        indent_style = &quot;tab&quot;;
        indent_size = 4;
      };
    };
  };

  /*
  mdbook: https://rust-lang.github.io/mdBook
  */
  mdbook = std.nixago.mdbook {
    configData = {
      book.title = &quot;The Standard Book&quot;;
    };
  };
}
</code></pre>
<p>In this Organelle, we have been modifying some built-in convenience <code>std.nixago.*</code> pebbles.
The way <code>configData</code> is merged upon the existing pebble is via a simple left-hand-side/right-hand-site <code>data-merge</code> (<code>std.dmerge</code>).</p>
<blockquote>
<p><strong>Background on array merge strategies:</strong></p>
<p>If you know how a plain data-merge (does not magically) deal with array merge semantics, you noticed:
We didn‚Äôt have to annotate our right-hand-side arrays in this example because we where not actually amending or modifying any left-hand-site array type data structure.</p>
<p>Would we have done so, we would have had to annotate:</p>
<ul>
<li>either with <code>std.dmerge.append [/* ... */]</code>;</li>
<li>or with <code>std.dmerge.update [ idx ] [/* ... */]</code>.</li>
</ul>
<p>But lucky us (this time)!</p>
</blockquote>
<h2 id="command-line-synthesis"><a class="header" href="#command-line-synthesis">Command Line Synthesis</a></h2>
<p>With this configuration in place, you have a couple of options on the command line.
Note, that you can accessor any <code>std</code> cli invocation also via the <code>std</code> TUI by just typing <code>std</code>.
Just in case you forgot exactly how to accessor one of these repository capabilities.</p>
<blockquote>
<p><strong>Debug Facility:</strong></p>
<p>Since the debug facility is enabled, you will see some trace output while running these commands.
To switch this off, just comment the <code>debug = [ /* ... */ ];</code> attribute in the flake.</p>
<p>It looks something like this:</p>
<pre><code class="language-nix">trace: inputs on x86_64-linux
trace: {
  cells = {‚Ä¶};
  nixpkgs = {‚Ä¶};
  self = {‚Ä¶};
  std = {‚Ä¶};
}
</code></pre>
</blockquote>
<p><strong>Invoke devshell via <code>nix</code></strong></p>
<pre><code class="language-bash">nix develop -c &quot;$SHELL&quot;
</code></pre>
<p>By quirks of the Nix CLI, if you don‚Äôt specify <code>-c &quot;$SHELL&quot;</code>, you‚Äôll be thrown into an unfamiliar bare <code>bash</code> interactive shell.
That‚Äôs not what you want.</p>
<p><strong>Invoke the devshell via <code>std</code></strong></p>
<p>In this case, invoking <code>$SHELL</code> correctly is taken care for you by the Clade‚Äôs <code>enter</code> Action.</p>
<pre><code class="language-bash"># fetch `std`
$ nix shell github:divnix/std
$ std //automation/devshells/default:enter
</code></pre>
<p>Since we have declared the devshell Organelle as a <code>clades.devshells</code>, <code>std</code> auments it‚Äôs Targets with the Clade Actions.</p>
<p>See <a href="../../reference/clades/devshells-clade.html"><code>clades.devshells</code></a> for more details on the available Actions and their implementation.</p>
<p>Thanks to the <code>cell.devshells</code>‚Äô <code>nixago</code> option, entering the devshell will also automatically reconcile the repository files under Nixago‚Äôs management.</p>
<p><strong>Explore a Nixago Pebble via <code>std</code></strong></p>
<p>You can also explore the nixago configuration via the Nixago Clade‚Äôs <code>explore</code>-Action.</p>
<pre><code class="language-bash"># fetch `std`
$ nix shell github:divnix/std
$ std //automation/nixago/treefmt:explore
</code></pre>
<p>See <a href="../../reference/clades/nixago-clade.html"><code>clades.nixago</code></a> for more details on the available Actions and their implementation.</p>
<h2 id="direnv"><a class="header" href="#direnv">direnv</a></h2>
<p>Manually entering the devshell is boring.
How about a daemon always does that automatically &amp; efficiently when you <code>cd</code> into a project directory?
Enter <a href="https://direnv.net"><code>direnv</code></a> ‚Äî the original (again; and even from the same author) üòä.</p>
<p>Before you continue, first install direnv according to it‚Äôs <a href="https://direnv.net/docs/installation.html">install instructions</a>.
It‚Äôs super simple &amp; super useful ‚Ñ¢ and you should do it <em>right now</em> if you haven‚Äôt yet.</p>
<p>Please learn how to enable <code>direnv</code> in this project by following the <a href="../../guides/envrc.html">direnv how-to</a>.</p>
<p>In this case, you would adapt the relevant line to: <strong><code>use std nix //automation/devshells:default</code></strong>.</p>
<p>Now, you can simply <code>cd</code> into that directory, and the devshells is being loaded.
The MOTD will be shown, too.</p>
<p>The first time, you need to teach the <code>direnv</code> daemon to trust the <code>.envrc</code> file via <code>direnv allow</code>.
If you want to reload the devshell (e.g. to reconcile Nixago Pepples), you can just run <code>direnv reload</code>.</p>
<p>Because I use these commands so often, I‚Äôve set: <code>alias d=&quot;direnv&quot;</code> in my shell‚Äôs RC file.</p>
<hr />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../tutorials/hello-world/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../../guides/growing-cells.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../tutorials/hello-world/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../../guides/growing-cells.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="../../static/mermaid.min.js"></script>
        <script type="text/javascript" src="../../static/mermaid-init.js"></script>
    </body>
</html>
